title: 'Update Icinga'
pages:

  - title: 'Questionnaire'
    tasks:
      - linuxfabrik.clf.text_input:
          label: 'Hostname (FQDN)?'
          required: false
        fact_name: 'hostname_fqdn'

      - linuxfabrik.clf.checkbox_input:
          label: 'Which components should be updated?'
          required: false
          values:
            - 'Icinga2 Core'
            - 'IcingaWeb2'
            - 'Module: Icinga Director'
            - 'Linuxfabrik Monitoring Plugins'
        fact_name: 'components'

  - title: 'Update Icinga'
    tasks:
      - linuxfabrik.clf.markdown:
          content: |
              On host {{ hostname_fqdn }}, run this:
            
              `dnf -y update icinga*`

    when:
      - '"icinga2 core" in (components | map("lower"))'
      - '"icingaweb2" in (components | map("lower"))'

